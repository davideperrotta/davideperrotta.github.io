---
import astroLogo from '../assets/astro.svg';

const year = new Date().getFullYear();
const {
	title =
		'Davide Perrotta · Web developer, software developer and software architect in Milano and Catanzaro (Italy)',
	description =
		"Portfolio and resume of Davide Perrotta, web developer, software developer and software architect based between Milano and Catanzaro (Italy). Sviluppatore web, sviluppatore software e architetto software che progetta e realizza applicazioni web moderne e performanti.",
	noindex = false,
} = Astro.props;

const canonicalUrl = new URL(
	Astro.url.pathname || '/',
	Astro.site ?? 'https://davideperrotta.github.io/',
).toString();

const personJsonLd = {
	'@context': 'https://schema.org',
	'@type': 'Person',
	name: 'Davide Perrotta',
	jobTitle: 'Web Developer, Software Developer, Software Architect',
	url: canonicalUrl,
	address: [
		{
			'@type': 'PostalAddress',
			addressLocality: 'Milano',
			addressCountry: 'IT',
		},
		{
			'@type': 'PostalAddress',
			addressLocality: 'Catanzaro',
			addressCountry: 'IT',
		},
	],
	knowsAbout: [
		'web development',
		'software development',
		'software architecture',
		'frontend engineering',
		'backend development',
	],
};
---
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="favicon.svg" />
		<link rel="icon" type="image/x-icon" href="favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<meta name="description" content={description} />
		<link rel="canonical" href={canonicalUrl} />
		<meta property="og:type" content="website" />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:url" content={canonicalUrl} />
		<meta property="og:site_name" content="Davide Perrotta" />
		<meta property="og:locale" content="en_US" />
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		{noindex && <meta name="robots" content="noindex, nofollow" />}
		<script type="application/ld+json">
			{JSON.stringify(personJsonLd)}
		</script>
	</head>
	<body>
		<slot />
		<footer class="site-footer">
			<span>{year} Davide Perrotta · Built with Astro</span>
			<img
				class="site-footer__logo"
				src={astroLogo.src}
				alt="Astro"
				width="28"
				height="28"
				loading="lazy"
			/>
		</footer>
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}

	body {
		min-height: 100vh;
		font-family: system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text',
			'Helvetica Neue', Arial, sans-serif;
		background:
			radial-gradient(circle at top left, #1f2937 0, transparent 55%),
			radial-gradient(circle at bottom right, #0f172a 0, transparent 55%),
			radial-gradient(circle at top right, #4f46e5 0, transparent 50%);
		background-color: #020617;
		background-repeat: no-repeat;
		background-attachment: fixed;
		color: #e5e7eb;
		padding: 2.5rem 1rem 2rem;
		box-sizing: border-box;
	}

	.site-footer {
		padding: 1.5rem;
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 0.6rem;
		font-size: 0.8rem;
		color: var(--text-muted);
		opacity: 0.9;
		text-align: center;
	}

	.site-footer__logo {
		background-color: #ffffff;
		border-radius: 999px;
		padding: 3px;
	}

	:root {
		--accent: #4f46e5;
		--accent-soft: #a5b4fc;
		--accent-strong: #818cf8;
		--text-muted: #9ca3af;
	}
</style>
