---
const { experience } = Astro.props;
---

<section class="card" aria-labelledby="experience-title">
	<h2 id="experience-title">{experience.title}</h2>

	{experience.positions?.length && (
		<article class="entry">
			<header>
				<h3>{experience.positions[0].role}</h3>
				<p class="entry__meta">{experience.positions[0].meta}</p>
			</header>
			<ul>
				{experience.positions[0].bullets?.map((bullet) => (
					<li>{bullet}</li>
				))}
			</ul>
		</article>
	)}

	{experience.positions?.length > 1 && (
		<details class="experience-more">
			<summary class="experience-more__summary">
				<span class="sr-only">Toggle previous roles</span>
			</summary>
			{experience.positions.slice(1).map((position) => (
				<article class="entry">
					<header>
						<h3>{position.role}</h3>
						<p class="entry__meta">{position.meta}</p>
					</header>
					<ul>
						{position.bullets?.map((bullet) => (
							<li>{bullet}</li>
						))}
					</ul>
				</article>
			))}
		</details>
	)}
</section>

<style>
	.entry {
		& + .entry {
			margin-top: 1.25rem;
			padding-top: 1.25rem;
			border-top: 1px solid rgba(148, 163, 184, 0.4);
		}
	}

	.entry ul {
		margin: 0.15rem 0 0;
		padding-left: 1.1rem;
	}

	.entry li {
		margin: 0.15rem 0;
	}

	.experience-more {
		margin-top: 1.1rem;
	}

	.experience-more__summary {
		cursor: pointer;
		margin: 0;
		padding: 0.26rem 0.6rem;
		border-radius: 999px;
		border: 1px solid rgba(129, 140, 248, 0.9);
		background: radial-gradient(circle at top left, rgba(79, 70, 229, 0.55), transparent 55%),
			linear-gradient(to right, rgba(15, 23, 42, 0.96), rgba(30, 64, 175, 0.9));
		font-size: 0.76rem;
		color: #e5e7eb;
		list-style: none;
		display: inline-flex;
		align-items: center;
		justify-content: center;
	}

	.experience-more__summary::after {
		content: 'Show more';
	}

	.experience-more[open] .experience-more__summary::after {
		content: 'Show less';
	}

	.experience-more__summary::-webkit-details-marker {
		display: none;
	}

	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border: 0;
	}
</style>
